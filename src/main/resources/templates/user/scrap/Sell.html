<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/user}">
	  	  
<!-- 커스텀 타이틀 지정 -->
<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
</th:block>
	  
<!-- contents layout:fragment 정의 -->
<th:block layout:fragment="userCustomContents">
	<div class="col-sm-12">
	<div class="panel panel-success" style="margin-top: 15px;">
		<div class="panel-heading">
			<h3 th:text="${h1text}" class="m-b-0 text-white"></h3>
			<p class="m-b-0 text-white">내 업사이클링 재료(폐품) 판매하기<p>
		</div>

		<div class="panel panel-default">
			<div class="panel-body">
				<ul class="list-group">
					<li style="font-size: large;" class="list-group-item list-group-item-info">1. </li>
					<li style="font-size: large;" class="list-group-item list-group-item-info">2. </li>
					<li style="font-size: large;" class="list-group-item list-group-item-danger">3. </li>
					<li style="font-size: large;" class="list-group-item list-group-item-danger">4. </li>
				</ul>
			</div>
		</div>
			<div class="panel-body">
			<div class="card-body" style = "background-color: white;">
				<form th:action="@{Sell/scrapSeleRequest}" method="get">
					<div style="display: none">
						<input type="text" class="form-control" th:value="${scrapRequestCode}" name="scrapRequestCode" hidden="hidden">
					</div>
					<div style="font-size: large;">아이디</div>
					<!--  <input style="margin-bottom: 20px;" type="text" class="form-control" value="upbus_user" id="scrapMemberId" name="scrapMemberId" readonly="readonly">-->
					<!--로그인 기능 완성 후 연동 예정-->
					<input type="text" class="form-control" th:value="${session.SID}" id="scrapMemberId" name="scrapMemberId" readonly="readonly">
					
					<div style="font-size: large;">재료 종류를 선택해주세요.</div>
					<div class="form-group">
						1. 먼저 큰 분류를 선택해주세요.
						<select class="form-control" id="scrapCategory" onchange="chainedSub(this.value)">
							<option value="">대분류</option>
							<option th:each="list : ${scrapCategory}" th:value="${list.scrapCategoryName}">[[${list.scrapCategoryName}]]</option>
						</select>
					</div>
					<div class="form-group">
						2. 다음 작은 분류를 선택해주세요.
						<select style="margin-bottom: 20px;" class="form-control" id="scrapUpcylingList" name="scrapMaterialListCode">
							<option value="">재료 이름</option>
						</select>
					</div>
					<script>
						var scrapSubCategory = $('#scrapUpcylingList');
						var scrapCategory = $('#scrapCategory');
						scrapSubCategory.click(function () {
							if ($('#scrapCategory').val() == '') {
								alert("대분류를 먼저 선택해주세요.");
								scrapCategory.focus();
								return;
							}
						});
						
						function chainedSub(main) {
							if(main == ''){
								scrapSubCategory.append('<option value="">재료 이름</option>');
							}
							$.ajax({
								url: 'user/scrap/Sell/GetScrapSubCategory',
								data: {scrapCategory: $('#scrapCategory option:selected').val()},
								dataType: "json",
								type: 'get',
								success: function (data) {
									
									$('#scrapSubCategory option').remove();
									if(data.length == 0){
										scrapSubCategory.append('<option value="">재료 이름</option>');
									}else {
										$(data).each(function (i) {
											scrapSubCategory.append('<option value="' + data[i].scrapName+ '">'
													+ data[i].scrapName + '</option>');
										});
									}
								},
								error: function () {
									alert("Bad Request");
								}
							});
						}
					</script>
					<div style="font-size: large;">판매하려는 재료의 개수를 적어주세요.</div>
					<div class="input-group mb-3">
						<input style= "margin-bottom: 20px;" type="number" class="form-control" placeholder="상품의 개수" id="scrapRequestAmount" name="scrapRequestAmount" >
					</div>
					<div>
					주소 API 넣을 예정
					</div>
					<div class="panel panel-default">
						<div class="panel-body">
							<div class="form-group">
								<label style = "font-size: large;"><!--for="goodsImageLabel"-->상품이 어떤 모습인지도 보여주세요!</label>
								<!--<input type="file" id="goodsImageLabel" name="goodsRequestImage">-->
								<p class="help-block">상품의 사진을 여기에 업로드 해주세요.</p>
								<input type="text" class="form-control" placeholder="사진 업로드 기능 추가 후 삭제" value="" name="scrapRequestImage" style="display: none;"/>
							</div>
						</div>
					</div>

					<div class="container-fluid">
					<button type="submit" class="btn btn-success" id="scrapRequestSubmit">재료 판매 신청하기</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	</div>
</th:block>

</html>